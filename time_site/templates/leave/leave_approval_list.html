{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>–ó–∞—è–≤–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ—Ç–¥–µ–ª–∞</h3>
        <a href="{% url 'export_department_leaves_excel' %}" class="btn btn-success">
            üìÑ –°–∫–∞—á–∞—Ç—å –∑–∞—è–≤–∫–∏ –æ—Ç–¥–µ–ª–∞ –≤ Excel
        </a>
    </div>

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                <th>–¢–∏–ø</th>
                <th>–ü–µ—Ä–∏–æ–¥</th>
                <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–∞—Ç–∞ –ø–æ–¥–∞—á–∏</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for leave in leaves %}
            <tr>
                <td>{{ leave.user.get_full_name|default:leave.user.username }}</td>
                <td>{{ leave.get_leave_type_display }}</td>
                <td>{{ leave.start_date }} ‚Äî {{ leave.end_date }}</td>
                <td>{{ leave.reason }}</td>
                <td>{{ leave.get_status_display }}</td>
                <td>{{ leave.submitted_at|date:"d.m.Y H:i" }}</td>
                <td>
                    {% if leave.status == '–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏' %}
                        <a href="{% url 'leave_approve' leave.pk %}" class="btn btn-success btn-sm">–û–¥–æ–±—Ä–∏—Ç—å</a>
                        <a href="{% url 'leave_reject' leave.pk %}" class="btn btn-danger btn-sm">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</a>
                    {% else %}
                        <span class="text-muted">‚Äî</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="7">–ù–µ—Ç –∑–∞—è–≤–æ–∫</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="mt-4">
        <a href="javascript:history.back()" class="btn btn-secondary">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ
        </a>
    </div>
</div>
{% endblock %}
